<!DOCTYPE html>
<html>
<meta charset="utf-8">
<title>Alkaline</title>
<style>
body {
	font-family: 'Helvetica', 'Arial', sans-serif;
	font-size: 1rem;
}
</style>
<head>
</head>

<body>

<h1>Alkaline Technical Documentation</h1>
<h2>Contents</h2>
<nav>
<ul>
	<li></li>
</ul>
</nav>

<h2>Philosophy</h2>

<p>
	Alkaline was originally built upon Rubicon 2 codebase. But over our development period, a great deal of code ended up being changed. Lots of new features, monsters, items, powerups, bug corrections... So it grew up into its own thing. We've borrowed ideas (or entire features altogether) from all the great mods and mod frameworks of our time. Copper, Arcane Dimensions, progs_dump, Zerstorer, Malice, Rubicon Rumble Pack, Honey, Quoth... you name it. Also we've got a bunch of exclusive features. Our main focus was on things that we felt would be nice to have in all kinds of base-themed maps.
</p>
<p>
	We've decided to not change anything gameplay-related. All original weapons, monsters and items behave almost exactly the way you've known and loved for the last 25 years. We think it's laudable what mods like Copper or AD have done to improve balance and gameplay, but our intention was to expand over the solid gameplay foundations that vanilla Quake laid, and add a load of new features and mapping quality-of-life enhancements.
</p>
<p>
	We'll do a more in-depth walkthrough into Alkaline's features, so any mapper can take it as a framework for their own map or mod. We've decided to go through everything that's been changed from vanilla instead of pure Rubicon 2, for an easier understanding.
<p>

<hr>

<h2>Monsters</h2>

<p>Monsters have a multitude of new features now.</p>
<h3>Triggered spawning</h3>
<p>By setting the <strong>Trigger Spawned</strong> spawnflag, the monster will only show up after it's been triggered. No need for complex teleport setups. The following spawnflags can be used together with it:
</p>
<ul><li><strong>Silent spawn</strong>: makes it spawn without making the teleport effect & sound, for when you need to repopulate an area out of the player's view.</li>
<li><strong>Spawn angry</strong>: spawns the monster already in alert state.</li>
<li><strong>Count after spawn</strong>: the monster adds to the map's total monster count only after it's been spawned in.</li>
</ul>

<h3>Monster spawner</h3>
<p>
	Checking the <strong>Monster spawner</strong> flag turns this entity into a monster spawner, that creates a new instance of the monster whenever it's triggered. They always spawn angry, and have a telefrag check, so they may wait for a few seconds until they have room to spawn. The spawned monsters inherit all of the spawner entity's <strong>target*</strong> fields, so you can use it to add to a counter when they're killed for example.
	If you want it to spawn monsters in a defined time interval, you can set it up in conjunction with a <strong>trigger_repeat</strong>.
</p>
<p>The following keys are related to it:</p>

<ul><li><strong>totalspawncount</strong>: When set, the spawner will stop when it has spawned this amount of monsters. Also the total monster counter will start with this value already counted in, unless you set the <strong>Count after spawn</strong> flag as well. By default, it'll spawn monsters indefinitely.</li>
<li><strong>spawncount</strong>: Maximum amount of monsters spawned by this entity that can be alive at the same time (defaults to 10 monsters). If this value is reached, the monsters will stop spawning in from this entity until they're killed. Good for not overwhelming the player with a ludicrous amount of monsters in the same arena. Set to -1 if you want to disable this limit.</li>
</ul>

<h3>Other features</h3>
<ul><li><strong>No sight sound</strong> flag: The monster won't make its sight sound when angry at something.</li>
<li><strong>No infight</strong> flag: The monster won't be angry at another when hit, only at players. Note that it doesn't prevent some other monster from getting angry at it, thus never giving it a chance to fight back.</li>
<li><strong>No idle sounds</strong> flag: The monster won't make any idle sounds when standing still. It'll still make sounds if walking/following path_corners though.</li>
</ul>

<h3>Entity target_infight</h3>
<p>Point entity that makes <strong>target</strong> monster angry at <strong>target2</strong> when triggered.</p>
<p>
By default, the infighting doesn't start mutually, that is, <strong>target2</strong> monster will only get mad back at <strong>target</strong> after it's been attacked. If you want to make them angry at each other instantly, you can set the spawnflag <strong>Mutual hate</strong>.
</p>

<h3>Monsters</h3>
<p>Last, but not least, here's the list of the baddies that come with Alkaline. The other non-base vanilla monsters not mentioned here behave and look the same, but they're all still available to use.

<ul>
	<li><strong>Grunt (monster_army):</strong> 30 HP</li>
	<li><strong>Nail Grunt (monster_nailgrunt):</strong> 30 HP</li>
	<li><strong>Rottweiler (monster_dog):</strong> 25 HP</li>
	<li><strong>Enforcer (monster_enforcer):</strong> 80 HP</li>
	<li><strong>Ogre (monster_ogre):</strong> 200 HP</li>
	<li><strong>Ogre Marksman (monster_ogre_marksman):</strong> 200 HP</li>
	<li><strong>Ogre Berserker (monster_ogreb):</strong> 200 HP</li>
	<li><strong>Axe Grunt (monster_axegrunt):</strong> 75 HP</li>
	<li><strong>Saber Knight (monster_hell_knight):</strong> 250 HP</li>
	<li><strong>Dreadnaught (monster_dreadnaught):</strong> 150 HP</li>
	<li><strong>Centroid (monster_scourge):</strong> 300 HP</li>
	<li><strong>Eel (monster_eel):</strong> 25 HP</li>
	<li><strong>Frogman (monster_frogman):</strong> 100 HP</li>
	<li><strong>Drone (monster_drone):</strong> 100 HP</li>
	<li><strong>Centurion (monster_centurion):</strong> 150 HP</li>
	<li><strong>Probe (monster_probe):</strong> 200 HP</li>
	<li><strong>Floyd Automaton (monster_floyd):</strong> 200 HP</li>
	<li><strong>Mega Enforcer (monster_me):</strong> 150 HP</li>
	<li><strong>Bambler (monster_bambler):</strong> 500 HP</li>
	<li><strong>Hunter (monster_hunter):</strong> 600 HP</li>
	<li><strong>Arachnofloyd (monster_arachnofloyd):</strong> 600 HP</li>
	<li><strong>Lieutenant (monster_super_enforcer):</strong> 120 HP + 1000 armor</li>
	<li><strong>Prowler (monster_rider):</strong> 600-777 HP</li>
	<li><strong>Annihilator (monster_banshee):</strong> 1300 HP</li>
	<li><strong>Armagon (monster_armagon):</strong> 2000-3500 HP</li>
</ul>
<hr>

<h2>Items</h2>

<p>
Alkaline has some new items and item features.
</p>

<h3>Circuitboard</h3>
<p>Deployed through the point entity <strong>item_circuitboard</strong>, the circuitboard (or rather the "17-centimeter Fromitz board") is a completely customizable dummy item that does nothing on its own, nor adds anything to your inventory. It merely fires its targets when picked up. But don't be fooled by its simplicity, because it's where lies all its power. You can use it to trigger any event, say, spreading various circuitboards throughout your map, all targeting the same trigger_counter, that unlocks a door or a super secret for example. Almost every map in Alkaline used it in some way.
</p>
You can set a custom model (<strong>mdl</strong> key), pickup sound file (<strong>noise</strong> key), and pickup name (<strong>netname</strong> key). By default the pickup text will be shown at the top of the screen like any other item, but if you want to suppress that and just centerprint a message instead, you can set the <strong>No pickup text</strong> flag and define the message in the <strong>message</strong> field.
<p>

<h3>Trifecta</h3>
<p>
	The new awesome powerup in Alkaline. Gives you quad-damage, invincibility, and a mega health boost, all in one.
</p>

<h3>Keys</h3>

<p>Alkaline borrows the custom key system from progs_dump. You can create a key using the <strong>item_key_custom</strong> entity, and define a custom model, skin, sound and name. Then on any door you can set the name of the key that will open it. For more details, please refer to the in-editor documentation.</p>

<p>Also from progs_dump comes the <strong>item_key_custom</strong> brush entity. You can use it to "consume" a key from the player's inventory (custom or not) and trigger some event. Like a door would, but with no need for a door.

<h3>Item respawning</h3>
<p>Setting an item's <strong>ritem</strong> key to 1 makes it respawns after a few seconds, customizable through the <strong>respawndelay</strong> key. You also can set the maximum number of respawns through <strong>respawncount</strong>.
</p>
<p>By default, the item makes the traditional teleport sound/fog effect when respawning, but you can change it to the more discreet deathmatch-style respawn effect, through the spawnflag <strong>Spawn with DM effects</strong>.
</p>

<h3>Trigger spawning</h3>
<p>Like monsters, items also support trigger-spawning. Just set the <strong>Trigger spawned</strong> flag and it'll only show up after triggered. You can make it spawn silently using the <strong>Spawn silent</strong> flag.
</p>

<h3>Item positioning</h3>
<p>
	The <strong>Suspended in air</strong> spawnflag makes the item stay in place and never drop to the floor, so it hovers in midair. Quoting Lunaran in a similar Copper feature:
	<blockquote>It's a useful hackaround for items that insist on falling out of the world and vanishing because they don't like where you placed them. This also provides a handy solution to the irritating problem that a monster and an item cannot overlap without pushing the item out of the world.
    Even if items don't fall out of the world when you test your map in your Quake engine port of choice, inconsistent droptofloor() results are not unheard of across ports. Consider it best practice to always mark as SUSPENDED any progression-critical items like keys, or any other item that fires a necessary targetname, even when placed on the ground.</blockquote>
</p>
<p>
	The <strong>Don't start dropped</strong> flag, on the other hand, makes the item to still be affected by gravity, but it will not spawn already dropped the floor directly below it (I.E. it won't run droptofloor() upon spawn). This way the item will fall to the floor only after it has been spawned.
</p>

<h3>Item box model style</h3>
<p>
	By default, Alkaline uses the higher-detail BSP item box models from Rubicon Rumble Pack, but you also have the option to use MDL item boxes from Copper. You can select it through the <strong>itemstyle</strong> key, either on worldspawn to set it globally, or directly on the entity.
</p>

<hr>

<h2>Weapons</h2>

<p>In your arsenal, some old acquaintances have made a return in Alkaline, but there's new stuff too.

<h3>New weapons</h3>

<ul>
	<li><strong>Laser Cannon:</strong> The good-old laser-ricochet chaos-inducing weapon from Scourge of Armagon makes a comeback in Alkaline.</li>
	<li><strong>Chainsaw:</strong> The chainsaw from Zerstörer, with a cool new model, animation and effects, if you like to get up close and personal with your foes.</li>
	<li><strong>Plasma Rifle:</strong> A completely new weapon! Great for mowing down large groups of enemies as quickly as it mows down your cells.</li>
</ul>

<h3>Custom loadout</h3>
<p>You can define a completely custom loadout at map start using the <strong>take_weapons</strong> and <strong>give_weapons</strong> worldspawn keys, as well as each of the ammo types.</p>
<p>First, Alkaline will remove the ones checked in <strong>take_weapons</strong>, then give the ones selected in <strong>give_weapons</strong>. So, if your map would begin with a "shotgun start" (I.E. default inventory), taking away the axe and the shotgun will make the player start with no weapons at all.</p>
<p>Setting any of the <strong>ammo_*</strong> keys will override the current amount with the defined one.</p>
<p>Also, setting the <strong>reset_items</strong> worldspawn key to 1 will force a "shotgun start" on your map regardless of inventory/stats coming from a previous map. Note that the inventory reset is made before applying take/give weapons.</p>

<h3>Axe and shotgun pickups</h3>
<p>Since you have the option to remove the axe and the shotgun from your inventory, we've added them as traditional weapon pickups as well. Deploy them through the <strong>weapon_axe</strong> and <strong>weapon_shotgun</strong> point entities.
</p>

<h3>target_removeitems entity</h3>
<p>Acts the same way as the <strong>take_weapons</strong> worldspawn key, but can be used mid-level. Trigger it to remove the selected weapons from the activating player.

<hr>
<h2>Triggers</h2>
<hr>

<h2>Doors</h2>
<hr>

<h2>Plats</h2>
<hr>

<h2>Buttons</h2>
<hr>

<h2>Trains</h2>
<hr>

<h2>State System</h2>
<hr>

<h2>Shadows</h2>
<p>
	Alkaline has full-on support for switchable shadows if your compiling tools can handle it. Every brush entity, except triggers and <strong>func_detail_*</strong> entities, can cast togglable shadows, controllable by the <strong>misc_shadowcontroller</strong> point entity. That's how you need to set it up:
	<ul>
		<li>Create a <strong>_switchableshadow</strong> key in the desired entity and set it to 1;</li>
		<li>Give it a targetname - if the entity changes behaviour when adding a targetname, you can use the special <strong>targetname2</strong> key instead, which will work only for the shadow controller.</li>
		<li>Create a <strong>misc_shadowcontroller</strong> entity targeting the bmodel, and give it a different targetname.</li>
		<li>Triggering the shadow controller toggles the shadow on/off with a fading animation.</li>
	</ul>
	<strong>func_door</strong> and <strong>toggle_visiblewall</strong> don't need to have a controlling misc_shadowcontroler, just setting _switchableshadow to 1 makes it work automatically.
</p>
	
<h3>misc_shadowcontroller entity</h3>
<ul>
	<li><strong>speed</strong>: Controls the time in seconds it takes to fade the shadow in. Setting it to -1 disables fading.</li>
	<li><strong>speed2</strong>: Same as 'speed' but for the fade out animation. If unset it uses the same value as 'speed'.</li>
	<li><strong>spawnflags</strong>:
		<ul>
			<li>
				1. Shadow start off: target entity's switchable shadow start as disabled.
			</li>
		</ul>
	</li>
</ul>
	
<hr>

<h2>Lights</h2>

<p>
	Lights in Alkaline have two new features.
</p>
<ul>
	<li>Styled lights can be toggled by giving it a targetname as usual, but setting the light style into the <strong>style2</strong> key. You can make it fade it in/out by setting a spawnflag.</li>
	<li>You can control a light's style directly with the <strong>target_lightstyle</strong> point entity.</li>
</ul>
<p>Also, there are 2 new decorative light entities.</p>
<ul>
	<li><strong>light_fixture1</strong>: wall-mounted light fixture. Control the model's angle with the <strong>angle2</strong> field. Note that the angle set won't be shown in the editor, only in-game.</li>
	<li><strong>light_beacon</strong>: Floor-mounted red beacon. Has an optional blinking animation, that syncs with light style 16.</li>
</ul>

<h2>Environmental Effects</h2>

<h2>Gravity</h2>

<h2>Fog</h2>

<h2>Other Quality-of-Life enhancements</h2>

</body>
</html>